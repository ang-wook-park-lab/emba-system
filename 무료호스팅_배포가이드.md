# ğŸŒ ë¬´ë£Œ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ ë°°í¬ ê°€ì´ë“œ

## ì¶”ì²œ ë¬´ë£Œ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤

### 1. Railway (ì¶”ì²œ) â­
- **ì¥ì **: Node.js ì§€ì›, SQLite ì§€ì›, ë¬´ë£Œ í‹°ì–´ ì œê³µ
- **ë¬´ë£Œ**: $5 í¬ë ˆë”§/ì›” (ì¶©ë¶„í•¨)
- **URL**: https://railway.app

### 2. Render
- **ì¥ì **: ë¬´ë£Œ í‹°ì–´, ìë™ ë°°í¬
- **ë¬´ë£Œ**: ì œí•œì ì´ì§€ë§Œ ì‚¬ìš© ê°€ëŠ¥
- **URL**: https://render.com

### 3. Fly.io
- **ì¥ì **: ì „ ì„¸ê³„ CDN, ë¬´ë£Œ í‹°ì–´
- **ë¬´ë£Œ**: ì œí•œì 
- **URL**: https://fly.io

### 4. Vercel (í”„ë¡ íŠ¸ì—”ë“œ) + Railway (ë°±ì—”ë“œ)
- **ì¥ì **: Vercelì€ í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”
- **ë¬´ë£Œ**: ë‘˜ ë‹¤ ë¬´ë£Œ í‹°ì–´ ì œê³µ

---

## ğŸš‚ ë°©ë²• 1: Railway ë°°í¬ (ê°€ì¥ ì¶”ì²œ)

### 1ë‹¨ê³„: Railway ê³„ì • ìƒì„±
1. https://railway.app ì ‘ì†
2. GitHubë¡œ ë¡œê·¸ì¸ (ê¶Œì¥)

### 2ë‹¨ê³„: í”„ë¡œì íŠ¸ ì¤€ë¹„

#### 2-1. GitHubì— í”„ë¡œì íŠ¸ ì—…ë¡œë“œ
```bash
# Git ì´ˆê¸°í™” (ì•„ì§ ì•ˆí–ˆë‹¤ë©´)
cd kyungheewonwoo
git init
git add .
git commit -m "Initial commit"

# GitHubì— ìƒˆ ì €ì¥ì†Œ ìƒì„± í›„
git remote add origin https://github.com/your-username/your-repo.git
git push -u origin main
```

#### 2-2. Railway ì„¤ì • íŒŒì¼ ìƒì„±

`railway.json` íŒŒì¼ ìƒì„± (í”„ë¡œì íŠ¸ ë£¨íŠ¸):
```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "cd backend && npm start",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

#### 2-3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • íŒŒì¼

`backend/railway.env` íŒŒì¼ ìƒì„± (ì°¸ê³ ìš©):
```env
PORT=5000
NODE_ENV=production
JWT_SECRET=your-secret-key-here
JWT_EXPIRE=7d
```

### 3ë‹¨ê³„: Railwayì— ë°°í¬

1. **Railway ëŒ€ì‹œë³´ë“œ ì ‘ì†**
   - https://railway.app/dashboard

2. **ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±**
   - "New Project" í´ë¦­
   - "Deploy from GitHub repo" ì„ íƒ
   - GitHub ì €ì¥ì†Œ ì„ íƒ

3. **ì„œë¹„ìŠ¤ ì„¤ì •**
   - Root Directory: `backend` ì„ íƒ
   - Build Command: (ìë™ ê°ì§€)
   - Start Command: `npm start`

4. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
   - Railway ëŒ€ì‹œë³´ë“œ â†’ Variables íƒ­
   - ë‹¤ìŒ ë³€ìˆ˜ ì¶”ê°€:
     ```
     NODE_ENV=production
     PORT=5000
     JWT_SECRET=ê°•ë ¥í•œ-ë¹„ë°€í‚¤-ì…ë ¥
     JWT_EXPIRE=7d
     ```

5. **í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì„¤ì •**
   - RailwayëŠ” ë¹Œë“œ ì‹œ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ì§€ ì•ŠìŒ
   - `backend/package.json`ì— ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ í•„ìš”

### 4ë‹¨ê³„: ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

`backend/package.json` ìˆ˜ì •:
```json
{
  "scripts": {
    "start": "node server.js",
    "build": "cd ../frontend && npm install && npm run build",
    "postinstall": "npm run build"
  }
}
```

ë˜ëŠ” Railwayì—ì„œ ë¹Œë“œ ëª…ë ¹ì–´ ì„¤ì •:
```
Build Command: cd ../frontend && npm install && npm run build && cd ../backend && npm install --production
```

---

## ğŸ¨ ë°©ë²• 2: Render ë°°í¬

### 1ë‹¨ê³„: Render ê³„ì • ìƒì„±
1. https://render.com ì ‘ì†
2. GitHubë¡œ ë¡œê·¸ì¸

### 2ë‹¨ê³„: Web Service ìƒì„±

1. **Render ëŒ€ì‹œë³´ë“œ**
   - "New +" â†’ "Web Service" í´ë¦­
   - GitHub ì €ì¥ì†Œ ì—°ê²°

2. **ì„œë¹„ìŠ¤ ì„¤ì •**
   ```
   Name: emba-backend
   Environment: Node
   Region: Singapore (ë˜ëŠ” ê°€ê¹Œìš´ ì§€ì—­)
   Branch: main
   Root Directory: backend
   Build Command: cd ../frontend && npm install && npm run build && cd ../backend && npm install
   Start Command: npm start
   ```

3. **í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€**
   ```
   NODE_ENV=production
   PORT=10000
   JWT_SECRET=your-secret-key
   JWT_EXPIRE=7d
   ```

4. **ê³ ê¸‰ ì„¤ì •**
   - Auto-Deploy: Yes
   - Health Check Path: `/api/health`

### 3ë‹¨ê³„: ë°°í¬ í™•ì¸
- RenderëŠ” ìë™ìœ¼ë¡œ ë°°í¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤
- ë°°í¬ ì™„ë£Œ í›„ ì œê³µë˜ëŠ” URLë¡œ ì ‘ì†

---

## âœˆï¸ ë°©ë²• 3: Fly.io ë°°í¬

### 1ë‹¨ê³„: Fly.io CLI ì„¤ì¹˜
```bash
# Windows (PowerShell)
iwr https://fly.io/install.ps1 -useb | iex

# ë˜ëŠ”
choco install flyctl
```

### 2ë‹¨ê³„: Fly.io ë¡œê·¸ì¸
```bash
fly auth login
```

### 3ë‹¨ê³„: Fly.io ì•± ì´ˆê¸°í™”
```bash
cd kyungheewonwoo/backend
fly launch
```

### 4ë‹¨ê³„: fly.toml ì„¤ì •

`backend/fly.toml` íŒŒì¼ ìƒì„±:
```toml
app = "emba-backend"
primary_region = "icn"  # ì„œìš¸

[build]
  builder = "paketobuildpacks/builder:base"

[env]
  NODE_ENV = "production"
  PORT = "8080"

[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = true
  auto_start_machines = true
  min_machines_running = 0
  processes = ["app"]

[[vm]]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 256
```

### 5ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
fly secrets set JWT_SECRET=your-secret-key
fly secrets set JWT_EXPIRE=7d
```

### 6ë‹¨ê³„: ë°°í¬
```bash
fly deploy
```

---

## ğŸ¯ ë°©ë²• 4: Vercel (í”„ë¡ íŠ¸ì—”ë“œ) + Railway (ë°±ì—”ë“œ)

### í”„ë¡ íŠ¸ì—”ë“œë¥¼ Vercelì— ë°°í¬

#### 1ë‹¨ê³„: Vercel ê³„ì • ìƒì„±
1. https://vercel.com ì ‘ì†
2. GitHubë¡œ ë¡œê·¸ì¸

#### 2ë‹¨ê³„: Vercel ì„¤ì • íŒŒì¼ ìƒì„±

`vercel.json` íŒŒì¼ ìƒì„± (í”„ë¡œì íŠ¸ ë£¨íŠ¸):
```json
{
  "version": 2,
  "builds": [
    {
      "src": "frontend/package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "https://your-backend-url.railway.app/api/$1"
    },
    {
      "src": "/(.*)",
      "dest": "/$1"
    }
  ]
}
```

#### 3ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì„¤ì •

`frontend/package.json`ì— ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ í™•ì¸:
```json
{
  "scripts": {
    "build": "vite build",
    "vercel-build": "vite build"
  }
}
```

#### 4ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

Vercel ëŒ€ì‹œë³´ë“œì—ì„œ:
- Settings â†’ Environment Variables
- `VITE_API_URL` ì¶”ê°€: `https://your-backend-url.railway.app`

#### 5ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ API URL ìˆ˜ì •

`frontend/src/utils/axios.js` ìˆ˜ì •:
```javascript
const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:5000/api',
  // ...
})
```

---

## ğŸ“ ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ ì‘ì—…
- [ ] GitHubì— í”„ë¡œì íŠ¸ ì—…ë¡œë“œ
- [ ] `.env` íŒŒì¼ì€ `.gitignore`ì— í¬í•¨ (Gitì— ì—…ë¡œë“œ ì•ˆë¨)
- [ ] í™˜ê²½ ë³€ìˆ˜ëŠ” í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ì—ì„œ ì„¤ì •
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì™„ë£Œ í™•ì¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ í™•ì¸ (ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©)

### ë°±ì—”ë“œ ìˆ˜ì • ì‚¬í•­

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ í™•ì¸
`backend/database/db.js`ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸

#### 2. í¬íŠ¸ ì„¤ì •
í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” í¬íŠ¸ ì‚¬ìš© (í™˜ê²½ ë³€ìˆ˜ `PORT`)

#### 3. CORS ì„¤ì •
í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œ ë„ë©”ì¸ í—ˆìš©

`backend/server.js` ìˆ˜ì •:
```javascript
const corsOptions = {
  origin: process.env.FRONTEND_URL || 'http://localhost:3000',
  credentials: true
}
app.use(cors(corsOptions))
```

---

## ğŸ”§ Railway ë°°í¬ ìƒì„¸ ê°€ì´ë“œ

### 1. í”„ë¡œì íŠ¸ êµ¬ì¡° í™•ì¸
RailwayëŠ” `backend` ë””ë ‰í† ë¦¬ë¥¼ ë£¨íŠ¸ë¡œ ì¸ì‹í•´ì•¼ í•©ë‹ˆë‹¤.

### 2. Railway ì„¤ì •

#### nixpacks.toml íŒŒì¼ ìƒì„± (backend/)
```toml
[phases.setup]
nixPkgs = ['nodejs-18_x']

[phases.install]
cmds = [
  'cd ../frontend && npm install',
  'cd ../frontend && npm run build',
  'cd ../backend && npm install --production'
]

[start]
cmd = 'node server.js'
```

### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
Railway ëŒ€ì‹œë³´ë“œì—ì„œ:
```
NODE_ENV=production
PORT=5000
JWT_SECRET=your-strong-secret-key
JWT_EXPIRE=7d
```

### 4. ë°°í¬
- GitHubì— í‘¸ì‹œí•˜ë©´ ìë™ ë°°í¬
- ë˜ëŠ” Railway ëŒ€ì‹œë³´ë“œì—ì„œ "Deploy" í´ë¦­

---

## ğŸŒ Render ë°°í¬ ìƒì„¸ ê°€ì´ë“œ

### 1. Render ì„¤ì •

#### render.yaml íŒŒì¼ ìƒì„± (í”„ë¡œì íŠ¸ ë£¨íŠ¸)
```yaml
services:
  - type: web
    name: emba-backend
    env: node
    region: singapore
    plan: free
    buildCommand: cd frontend && npm install && npm run build && cd ../backend && npm install
    startCommand: cd backend && npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: JWT_SECRET
        generateValue: true
      - key: JWT_EXPIRE
        value: 7d
```

### 2. ë°°í¬
- GitHubì— í‘¸ì‹œí•˜ë©´ ìë™ ë°°í¬
- Render ëŒ€ì‹œë³´ë“œì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€

---

## ğŸ ë¬´ë£Œ í˜¸ìŠ¤íŒ… ë¹„êµ

| ì„œë¹„ìŠ¤ | ë¬´ë£Œ í‹°ì–´ | Node.js | SQLite | ìë™ ë°°í¬ | ì¶”ì²œë„ |
|--------|----------|---------|--------|----------|--------|
| Railway | $5/ì›” í¬ë ˆë”§ | âœ… | âœ… | âœ… | â­â­â­â­â­ |
| Render | ì œí•œì  | âœ… | âœ… | âœ… | â­â­â­â­ |
| Fly.io | ì œí•œì  | âœ… | âœ… | âœ… | â­â­â­ |
| Vercel | ë¬´ì œí•œ | âœ… | âŒ | âœ… | â­â­â­â­ (í”„ë¡ íŠ¸ì—”ë“œ) |

---

## ğŸš€ ë¹ ë¥¸ ë°°í¬ (Railway ì¶”ì²œ)

### ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•:

1. **GitHubì— ì—…ë¡œë“œ**
   ```bash
   git init
   git add .
   git commit -m "Ready for deployment"
   git remote add origin https://github.com/your-username/your-repo.git
   git push -u origin main
   ```

2. **Railway ì ‘ì†**
   - https://railway.app
   - GitHubë¡œ ë¡œê·¸ì¸
   - "New Project" â†’ "Deploy from GitHub repo"

3. **ì„¤ì •**
   - Root Directory: `backend`
   - í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€:
     - `NODE_ENV=production`
     - `JWT_SECRET=your-secret-key`
     - `JWT_EXPIRE=7d`

4. **ë¹Œë“œ ëª…ë ¹ì–´** (Railway ì„¤ì •ì—ì„œ)
   ```
   cd ../frontend && npm install && npm run build && cd ../backend && npm install --production
   ```

5. **ì‹œì‘ ëª…ë ¹ì–´**
   ```
   npm start
   ```

6. **ë°°í¬ ì™„ë£Œ!**
   - Railwayê°€ ìë™ìœ¼ë¡œ URL ì œê³µ
   - ì˜ˆ: `https://your-app.railway.app`

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
- ë¬´ë£Œ í˜¸ìŠ¤íŒ…ì€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ë°±ì—…í•˜ì„¸ìš”
- RailwayëŠ” ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ì„ ì˜êµ¬ ì €ì¥ì†Œì— ë§ˆìš´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

### 2. í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ
- `.env` íŒŒì¼ì€ ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”
- ëª¨ë“  ë¹„ë°€í‚¤ëŠ” í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ì˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •

### 3. í¬íŠ¸ ì„¤ì •
- í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ê°€ ì œê³µí•˜ëŠ” í¬íŠ¸ ì‚¬ìš©
- Railway: `process.env.PORT`
- Render: ê¸°ë³¸ì ìœ¼ë¡œ `10000` ì‚¬ìš©

### 4. íŒŒì¼ ì—…ë¡œë“œ
- ë¬´ë£Œ í˜¸ìŠ¤íŒ…ì€ íŒŒì¼ ì‹œìŠ¤í…œì´ ì„ì‹œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì˜êµ¬ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€(S3 ë“±) ì‚¬ìš© ê¶Œì¥

---

## ğŸ“ ë¬¸ì œ í•´ê²°

### ë°°í¬ ì‹¤íŒ¨ ì‹œ
1. ë¡œê·¸ í™•ì¸ (í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ ëŒ€ì‹œë³´ë“œ)
2. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
3. ë¹Œë“œ ëª…ë ¹ì–´ í™•ì¸
4. í¬íŠ¸ ì„¤ì • í™•ì¸

### ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¥˜
- ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ê²½ë¡œ í™•ì¸
- ì“°ê¸° ê¶Œí•œ í™•ì¸
- ì˜êµ¬ ì €ì¥ì†Œ ë§ˆìš´íŠ¸ (Railway)

---

## ğŸ‰ ë°°í¬ ì™„ë£Œ í›„

ë°°í¬ê°€ ì™„ë£Œë˜ë©´:
1. ì œê³µëœ URLë¡œ ì ‘ì†
2. `/api/health` ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
3. ë¡œê·¸ì¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
4. ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸

**Railway ë°°í¬ê°€ ê°€ì¥ ê°„ë‹¨í•˜ê³  ì¶”ì²œí•©ë‹ˆë‹¤!** ğŸš‚

